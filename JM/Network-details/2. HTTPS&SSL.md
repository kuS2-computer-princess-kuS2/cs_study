# HTTP&HTTPS

---

## HTTP

: μ›ΉλΈλΌμ°μ €(Client)μ™€ μ„λ²„(Server)κ°„μ μ›Ήνμ΄μ§€κ°™μ€ μμ›μ„ μ£Όκ³  λ°›μ„ λ• μ“°λ” ν”„λ΅ν† μ½. 

- ν¬νΈ λ²νΈ : 80
- μ£Όλ΅ HTML λ¬Έμ„λ¥Ό μ£Όκ³ λ°›λ”λ° μ‚¬μ©λ¨.
- λ‹¨μ ν…μ¤νΈλ¥Ό μ£Όκ³ λ°›μ•„μ„ λ„κµ°κ°€κ°€ λ„¤νΈμ›ν¬μ—μ„ μ‹ νΈλ¥Ό κ°€λ΅μ±„μ–΄ λ³Ό μ μλ‹¤.

## HTTPS(HTTP+SSL)

 HTTPμ—μ„μ λ³΄μ•μƒ λ¬Έμ λ¥Ό ν•΄κ²°ν•΄μ¤€ ν”„λ΅ν† μ½. 

- ν¬νΈ λ²νΈ : 443
- HTTPSλ” SSLν”„λ΅ν† μ½μ„ μ΄μ©ν•΄ κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©

# SSL

---

: μ‹ λΆ°ν•  μ μλ” μ  3μκ°€ λ°ν–‰ν• **μΈμ¦μ„(CA)**λ¥Ό ν†µν•΄ λ³„λ„λ΅ λ°κΈ‰ν• μ•”νΈν™” ν‚¤λ¥Ό κ°€μ§€κ³  μ†΅μ‹ μμ™€ μμ‹ μκ°€ **μ„λ΅ μ•”νΈν™”λ ν†µμ‹ **μ„ ν•λ” ν”„λ΅ν† μ½ 

- TLSλ” SSLκ³Ό κ°™μ€ μλ―Έλ΅ ν†µμ©λλ‹¤.
- λ€μΉ­ν‚¤μ™€ κ³µκ°ν‚¤ μ•”νΈκΈ°μ μ„ λ¨λ‘ μ‚¬μ©ν•λ” **ν•μ΄λΈλ¦¬λ“ λ°©μ‹**μ„ μ‚¬μ©ν•λ‹¤.

### CA(Certificate Authority)

- SSL μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ£Όλ” **μΈμ¦κΈ°κ΄€**
- κ³µκ°ν‚¤λ” λ„κµ¬λ‚ λ³Ό μ μλ” μ •λ³΄μ΄μ§€λ§ ν•΄λ‹Ή **ν‚¤**λ” **μ‹ λΆ°**ν•  μ μμ–΄μ•Όν•λ‹¤, μ΄λ¥Ό μ¦λ…ν•΄μ£Όλ” κ²ƒμ΄ μΈμ¦κΈ°κ΄€μ μ—­ν• μ΄λ‹¤.
- CA μΈμ¦κΈ°κ΄€ μ •λ³΄λ” **λΈλΌμ°μ € λ° OS λ“± μ €μ¥μ†μ— μ €μ¥**λμ–΄ μ›Ήμ‚¬μ΄νΈ μ ‘μ† μ‹ κ²€μ¦ν•  μ μλ‹¤.

## μ•”νΈ κΈ°μ  : ν•μ΄λΈλ¦¬λ“ λ°©μ‹

: μ†΅μ‹ μκ°€ κ³µκ°ν‚¤λ΅ λ€μΉ­ν‚¤λ¥Ό μ•”νΈν™”ν•΄ μƒλ€λ°©μ—κ² μ „μ†΅ν•κ³ , μμ‹ μκ°€ λΉ„λ°€ν‚¤λ΅ ν•΄λ‹Ή λ€μΉ­ν‚¤λ¥Ό λ³µνΈν™”ν•λ” λ°©μ‹.

- ν•΄λ‹Ή κΈ°μ μ„ μ΄μ©ν•λ©΄ λ€μΉ­ν‚¤ μƒμ„± ν›„ λ©”μ‹μ§€λ¥Ό λ€μΉ­ν‚¤λ¥Ό μ΄μ©ν•΄ μ•”νΈν™”, λ³µνΈν™” ν•κ² λλ‹¤.
- λ”°λΌμ„, λ€μΉ­ν‚¤μ μ¥μ μΈ λΉ λ¥Έ μ†λ„μ™€ λΉ„λ€μΉ­ν‚¤μ μ¥μ μΈ ν‚¤ λ¶„λ°°λ¥Ό λ™μ‹μ— μ μ©ν•  μ μλ‹¤.

### ν•μ΄λΈλ¦¬λ“ μ•”νΈν™”

μ†΅μ‹ μλ” ν΄λΌμ΄μ–ΈνΈ(π‘©), μμ‹ μλ” μ„λ²„(π–¥οΈ)λ΅ κ°€μ •ν•λ‹¤. 

| ν΄λΌμ΄μ–ΈνΈπ‘© | μ„λ²„π–¥οΈ | κ³Όμ • |
| --- | --- | --- |
| π”‘ | π”“,π”’ | π–¥οΈ : κ³µκ°ν‚¤, λΉ„λ°€ν‚¤ μƒμ„± |
| π”‘,π”“ | π”“,π”’ | π–¥οΈ : κ³µκ°ν‚¤ λ°°ν¬ |
| π”‘,π”“ | π”“,π”’ | π‘© : λ€μΉ­ν‚¤ μ•”νΈν™” |
| π”‘,π”“ | (π”‘+π”“),π”“,π”’ | π‘© : κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ λ€μΉ­ν‚¤ μ „λ‹¬ |
| π”‘,π”“ | π”‘,π”“,π”’ | π–¥οΈ : λΉ„λ°€ν‚¤λ΅ λ€μΉ­ν‚¤ λ³µνΈν™”  |
1. μμ‹ μ(π–¥οΈ)κ°€ **κ³µκ°ν‚¤π”“**μ™€ **λΉ„λ°€ν‚¤π”’**λ¥Ό λ§λ“ λ‹¤.
2. μμ‹ μ(π–¥οΈ)λ” **κ³µκ°ν‚¤π”“**λ” λ¨λ‘μ—κ² λ°°ν¬ν•κ³ , **λΉ„λ°€ν‚¤π”’**λ” λ³΄κ΄€ν•λ‹¤.
3. μ†΅μ‹ μ(π‘©)λ” **κ³µκ°ν‚¤π”“**λ΅ **λ€μΉ­ν‚¤π”‘**λ¥Ό **μ•”νΈν™”**ν•΄ μμ‹ μ(π–¥οΈ)μ—κ² μ „μ†΅ν•λ‹¤.
4. μμ‹ μ(π–¥οΈ)λ” **λΉ„λ°€ν‚¤π”’**λ¥Ό **λ€μΉ­ν‚¤π”‘**λ¥Ό **λ³µνΈν™”** ν•λ‹¤. 
    
    β†’ μ–‘ μΈ΅ λ¨λ‘ **λ€μΉ­ν‚¤π”‘λ¥Ό λ³΄μ ν• μƒνƒ**κ°€ λλ‹¤(ν‘μ λ§μ§€λ§‰).
    
5. μ†΅μ‹ μ(π‘©)λ” **λ€μΉ­ν‚¤π”‘**λ΅ λ°μ΄ν„°λ¥Ό **μ•”νΈν™”**ν•΄ **μ†΅μ‹ **ν•λ‹¤.
6. μμ‹ μ(π–¥οΈ)λ” **λ€μΉ­ν‚¤π”‘**λ΅ **μμ‹ **ν• λ°μ΄ν„°λ¥Ό **λ³µνΈν™”**ν•λ‹¤.  

## SSL μ „μ²΄ λ™μ‘ κ³Όμ •

: ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” λ°©μ‹μ„ λ°”νƒ•μΌλ΅ μΈμ¦κΈ°κ΄€(CA)κ°€ ν¬ν•¨λ κ³Όμ • 

- μΈμ¦κΈ°κ΄€μ—μ„ λ°κΈ‰ν•λ” μΈμ¦μ„λ¥Ό μ„¤μΉν•λ” κ³Όμ •μ— ν¬ν•¨λμ–΄μλ‹¤.

![Untitled](./2.png)

1. μ„λ²„(π–¥οΈ)λ” μ‚¬μ΄νΈμ •λ³΄μ™€ κ³µκ°ν‚¤π”“λ¥Ό μΈμ¦κΈ°κ΄€(πΆ)μ— μ „λ‹¬ν•΄ κ²€μ¦μ„ λ°›λ”λ‹¤.
2. μΈμ¦κΈ°κ΄€(πΆ)μ€ μ„λ²„(π–¥οΈ)μ μ •λ³΄ λ° κ³µκ°ν‚¤π”“λ¥Ό μΈμ¦κΈ°κ΄€μ λΉ„λ°€ν‚¤π”λ΅ μ•”νΈν™”ν•΄ μΈμ¦μ„π“λ¥Ό μ μ‘ν•λ‹¤.
3. μΈμ¦κΈ°κ΄€(πΆ)μ€ μ„λ²„(π–¥οΈ)μ— μ μ‘ν• μΈμ¦μ„π“λ¥Ό λ°κΈ‰ν•λ‹¤.
4. ν΄λΌμ΄μ–ΈνΈ(π‘©)κ°€ μ„λ²„(π–¥οΈ)μ— μ ‘μ†μ”μ²­μ„ ν•λ©΄, μ„λ²„(π–¥οΈ)λ” λ°κΈ‰ λ°›μ€ μΈμ¦μ„π“λ¥Ό μ „λ‹¬ν•λ‹¤. 
5. ν΄λΌμ΄μ–ΈνΈ(π‘©)λ” μΈμ¦κΈ°κ΄€(πΆ)μ—μ„ μ κ³µν•λ” κ³µκ°ν‚¤π”‘λ¥Ό κ°€μ§€κ³  μκ³ , μ΄ κ³µκ°ν‚¤π”‘λ¥Ό ν†µν•΄ μ„λ²„(π–¥οΈ)μ—μ„ μ „λ‹¬ λ°›μ€ μΈμ¦μ„π“λ¥Ό κ²€μ¦ν•λ‹¤. 
6. μ΄λ• μΈμ¦μ„π“λ” μΈμ¦κΈ°κ΄€(πΆ)μ λΉ„λ°€ν‚¤π”λ΅ μ•”νΈν™”ν•λ μ •λ³΄μ΄κΈ° λ•λ¬Έμ—, μΈμ¦κΈ°κ΄€(πΆ)μ κ³µκ°ν‚¤π”‘λ΅ κ²€μ¦ν•λ” κ³Όμ •μ—μ„ μ‚¬μ΄νΈ μ •λ³΄μ™€ κ³µκ°ν‚¤π”“λ¥Ό νλ“ν•  μ μλ‹¤.
7.  ν΄λΌμ΄μ–ΈνΈ(π‘©)λ” μ‚¬μ΄νΈμ κ³µκ°ν‚¤π”“λ΅ λ€μΉ­ν‚¤π—οΈλ¥Ό μ•”νΈν™”μ— μ„λ²„(π–¥οΈ)μ— μ „μ†΅ν•λ‹¤. 
8. μ„λ²„(π–¥οΈ)λ” μμ‹ μ λΉ„λ°€ν‚¤π”’λ΅ λ€μΉ­ν‚¤π—οΈλ¥Ό λ³µνΈν™”ν•λ‹¤. 
9. μ„λ²„(π–¥οΈ)μ™€ ν΄λΌμ΄μ–ΈνΈ(π‘©)λ” λ€μΉ­ν‚¤π—οΈλ¥Ό ν†µν•΄ μ•”νΈν™”λ μ •λ³΄λ¥Ό μ£Όκ³  λ°›λ”λ‹¤. 

## SSL handshake

ssl handshakeλ¥Ό ν¬κ² λ‚λ„λ©΄ μ•„λμ™€ κ°™λ‹¤.

1. μ•”νΈν™” λ°©μ‹ μ„ νƒ
2. μ„λ΅λ¥Ό μΈμ¦ : CA μ΄μ© 
3. λ€μΉ­ν‚¤ κµν™
4. μµμΆ… ν™•μΈ

![3.png](./3.png)

### SSL handshak μ‘λ™ λ°©μ‹

1. client hello(π‘© β†’ π–¥οΈ) : ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†
    - ν΄λΌμ΄μ–ΈνΈ μΈ΅(π‘©)μ—μ„ μƒμ„±ν• **λλ¤ λ°μ΄ν„°** : μ¶”ν›„ λ€μΉ­ν‚¤ μ‚¬μ©μ„ μ„ν•΄ μ „μ†΅ν•λ‹¤.
    - ν΄λΌμ΄μ–ΈνΈ(π‘©)κ°€ μ§€μ›ν•λ” **μ•”νΈν™” λ°©μ‹** : ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μƒνΈκ°„μ— μ–΄λ–¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•  κ²ƒμΈμ§€ ν‘μƒμ„ μ„ν•΄ μ „μ†΅ν•λ‹¤.
    - **μ„Έμ… μ•„μ΄λ””** : μ΄λ―Έ SSL ν•Έλ“μ‰μ΄ν‚Ήμ„ ν–λ‹¤λ©΄ **κΈ°μ΅΄μ μ„Έμ…μ„ ν™μ©**ν•  μ μλ‹¤.
2. server hello(π–¥οΈ β†’ π‘©) : μ„λ²„μ client hello μ‘λ‹µ
    - μ„λ²„(π–¥οΈ) μΈ΅μ—μ„ μƒμ„±ν• **λλ¤ λ°μ΄ν„°** : μ¶”ν›„ λ€μΉ­ν‚¤ μ‚¬μ©μ„ μ„ν•΄ μ „μ†΅ν•λ‹¤.
    - μ„λ²„(π–¥οΈ)κ°€ μ„ νƒν• ν΄λΌμ΄μ–ΈνΈ(π‘©) **μ•”νΈν™” λ°©μ‹** : ν΄λΌμ΄μ–ΈνΈ(π‘©)κ°€ μ „λ‹¬ν• μ•”νΈν™” λ°©μ‹ μ¤‘ μ„λ²„(π–¥οΈ)μ—μ„λ„ μ‚¬μ©ν•  μ μλ” **μ•”νΈν™” λ°©μ‹μ„ μ„ νƒν•΄ μ „λ‹¬**ν•λ‹¤.
    - **μΈμ¦μ„**
3. ν΄λΌμ΄μ–ΈνΈμΈ΅
    - **μΈμ¦μ„ κ²€μ¦**(π‘©) : CAμ—μ„ λ°κΈ‰λ κ²ƒμΈμ§€ ν™•μΈν•κΈ° μ„ν•΄ **ν΄λΌμ΄μ–ΈνΈ**(π‘©)**μ— λ‚΄μ¥λ CA λ¦¬μ¤νΈ ν™•μΈ**ν•λ‹¤.
        - λ¦¬μ¤νΈμ— μ΅΄μ¬ν•μ§€ μ•μΌλ©΄ κ²½κ³  λ©”μ‹μ§€λ¥Ό μ¶λ ¥ν•λ‹¤.
        - κ²€μ¦μ„ μ„ν•΄ ν΄λΌμ΄μ–ΈνΈ(π‘©)μ— λ‚΄μ¥λ **CAμ κ³µκ°ν‚¤**λ¥Ό μ΄μ©ν•΄ μΈμ¦μ„λ¥Ό **λ³µνΈν™”** ν•λ‹¤. β†’ λ³µνΈν™”κ°€ λλ©΄ μΈμ¦μ„λ” CAμ λΉ„λ°€ν‚¤λ΅ μ•”νΈν™”λ λ¬Έμ„μ„μ„ μ•”μ‹μ μΌλ΅ **λ³΄μ¦**ν• κ²ƒμ΄λ‹¤. β†’ **μ‹ λΆ°ν•  μ μλ” μ„λ²„**(π–¥οΈ)μ΄λ‹¤.
    - **λ€μΉ­ν‚¤**(pre master secret) μƒμ„± (π‘©)
        - μ„λ²„(π–¥οΈ)μ λλ¤ λ°μ΄ν„°μ™€ ν΄λΌμ΄μ–ΈνΈ(π‘©)κ°€ μƒμ„±ν• **λλ¤ λ°μ΄ν„°λ¥Ό μ΅°ν•©**ν•΄ **pre master secretμ„ μƒμ„±**ν•λ‹¤.
        - μ‚¬μ©ν•λ” μ•”νΈκΈ°μ μ€ λ€μΉ­ν‚¤λ΅ pre master secretμ€ μ  3μμ—κ² λ…Έμ¶λμ–΄μ„ μ•λλ‹¤.
    - **λ€μΉ­ν‚¤ μ„λ²„μ— μ „λ‹¬**(π‘© β†’ π–¥οΈ)
        - **μ„λ²„**(π–¥οΈ)**μ κ³µκ°ν‚¤**λ΅ **pre master secretκ°’μ„ μ•”νΈν™”**ν•΄ μ„λ²„μ— μ „μ†΅ν•΄ μ„λ²„λ” μμ‹ μ λΉ„κ³µκ°ν‚¤λ΅ μ•μ „ν•κ² λ³µνΈν™”ν•  μ μλ‹¤.
        - μ„λ²„μ κ³µκ°ν‚¤λ” μΈμ¦μ„μ— λ“¤μ–΄μλ‹¤.
4. λ€μΉ­ν‚¤ κ³µμ (π–¥οΈ)
    - μ„λ²„(π–¥οΈ)λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ „μ†΅ν• pre master secret κ°’μ„ μμ‹ μ **λΉ„κ³µκ°ν‚¤λ΅ λ³µνΈν™”**ν•λ‹¤.
    - λ”°λΌμ„, μ„λ²„(π–¥οΈ)μ™€ ν΄λΌμ΄μ–ΈνΈ(π‘©) **λ¨λ‘ pre mater secret κ°’μ„ κ³µμ **ν•κ² λλ‹¤.
    - μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” λ¨λ‘ μΌλ ¨μ κ³Όμ •μ„ κ±°μ³ pre master secretκ°’μ„ master secretκ°’μΌλ΅ λ§λ“¤κ³  μ΄λ¥Ό μ΄μ©ν•΄ **session keyλ¥Ό μƒμ„±**ν•λ‹¤.
    - μ„Έμ…ν‚¤λ¥Ό μ΄μ©ν•΄ λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™”ν• μ£Όκ³  λ°›μ•„ μ„Έμ…μ΄ μΆ…λ£λκΈ° μ „κΉμ§€ ν†µμ‹ ν•  μ μλ‹¤.
5. μΆ…λ£
    - ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” ν•Έλ“μ‰μ΄ν¬ λ‹¨κ³„μ μΆ…λ£λ¥Ό μ„λ΅μ—κ² μ•λ¦°λ‹¤.
    - μ„Έμ…ν‚¤λ΅ ν†µμ‹ ν• κ²½μ°, λ°μ΄ν„° μ „μ†΅μ΄ λλ‚λ©΄ SSL ν†µμ‹ μ΄ λλ‚¬μμ„ μ„λ΅μ—κ² μ•λ¦¬κ³  μ„Έμ…ν‚¤λ¥Ό νκΈ°ν•λ‹¤.

μ°Έκ³  

CA : [http://idchowto.com/μΈμ¦-κΈ°κ΄€certificate-authority-caμ΄λ€/](http://idchowto.com/%EC%9D%B8%EC%A6%9D-%EA%B8%B0%EA%B4%80certificate-authority-ca%EC%9D%B4%EB%9E%80/)

λ™μ‘κ³Όμ • : [https://www.stevenjlee.net/2020/11/01/μ΄ν•΄ν•κΈ°-http-vs-https-κ·Έλ¦¬κ³ -ssl-secure-socket-layer/](https://www.stevenjlee.net/2020/11/01/%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-http-vs-https-%EA%B7%B8%EB%A6%AC%EA%B3%A0-ssl-secure-socket-layer/)

ssl handshake : https://opentutorials.org/course/228/4894
